

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-29645087-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Bookmarks Plugin &mdash; Gate One 1.2.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/ansi.css" type="text/css" />
  

  
    <link rel="top" title="Gate One 1.2.0 documentation" href="../../index.html"/>
        <link rel="up" title="Terminal Developer Documentation" href="developer.html"/>
        <link rel="next" title="The Convenience Plugin" href="plugin_convenience.html"/>
        <link rel="prev" title="terminal_input.js" href="js_terminal_input.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Gate One
          

          
          </a>

          
            
            
              <div class="version">
                1.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../About/index.html">About Gate One</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Gate One Applications</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Terminal</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="userguide.html">User Guide</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="developer.html">Terminal Developer Documentation</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="developer.html#python-code">Python Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="developer.html#javascript-code">JavaScript Code</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="developer.html#plugin-code">Plugin Code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ReleaseNotes/index.html">Release Notes / Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Gate One</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Gate One Applications</a> &raquo;</li>
      
          <li><a href="index.html">Terminal</a> &raquo;</li>
      
          <li><a href="developer.html">Terminal Developer Documentation</a> &raquo;</li>
      
    <li>The Bookmarks Plugin</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/Applications/terminal/plugin_bookmarks.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-bookmarks-plugin">
<h1>The Bookmarks Plugin<a class="headerlink" href="#the-bookmarks-plugin" title="Permalink to this headline">¶</a></h1>
<div class="section" id="javascript">
<h2>JavaScript<a class="headerlink" href="#javascript" title="Permalink to this headline">¶</a></h2>
<p>bookmarks.js - The client-side portion of Gate One's Bookmarks plugin.</p>
<dl class="function">
<dt id="GateOne.Bookmarks.addFilterDateTag">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">addFilterDateTag</code><span class="sig-paren">(</span><em>bookmarks</em>, <em>dateTag</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.addFilterDateTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the given <em>dateTag</em> to the filter list.  <em>bookmarks</em> is unused.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.addFilterTag">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">addFilterTag</code><span class="sig-paren">(</span><em>bookmarks</em>, <em>tag</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.addFilterTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the given <em>tag</em> to the filter list.  <em>bookmarks</em> is unused.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.addFilterURLTypeTag">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">addFilterURLTypeTag</code><span class="sig-paren">(</span><em>bookmarks</em>, <em>typeTag</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.addFilterURLTypeTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the given <em>typeTag</em> to the filter list.  <em>bookmarks</em> is unused.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.addTagToBookmark">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">addTagToBookmark</code><span class="sig-paren">(</span><em>URL</em>, <em>tag</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.addTagToBookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the given <em>tag</em> to the bookmark object associated with <em>URL</em>.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.allTags">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">allTags</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.allTags" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array of all the tags in <code class="xref py py-obj docutils literal"><span class="pre">localStorage[GateOne.prefs.prefix+'bookmarks']</span></code> ordered alphabetically.</p>
</dd></dl>

<dl class="attribute">
<dt id="GateOne.Bookmarks.bookmarks">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">bookmarks</code><a class="headerlink" href="#GateOne.Bookmarks.bookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>All the user's bookmarks are stored in this array which is stored/loaded from <code class="xref py py-obj docutils literal"><span class="pre">localStorage[GateOne.prefs.prefix+'bookmarks']</span></code>.  Each bookmark consists of the following data structure:</p>
<div class="highlight-js"><div class="highlight"><pre><span class="p">{</span>
    <span class="nx">created</span><span class="o">:</span> <span class="mi">1356974567922</span><span class="p">,</span>
    <span class="nx">images</span><span class="o">:</span> <span class="p">{</span><span class="nx">favicon</span><span class="o">:</span> <span class="s2">&quot;data:image/x-icon;base64,&lt;gobbledygook&gt;&quot;</span><span class="p">},</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="nx">notes</span><span class="o">:</span> <span class="s2">&quot;Login to the Gate One server itself&quot;</span><span class="p">,</span>
    <span class="nx">tags</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Linux&quot;</span><span class="p">,</span> <span class="s2">&quot;Ubuntu&quot;</span><span class="p">,</span> <span class="s2">&quot;Production&quot;</span><span class="p">,</span> <span class="s2">&quot;Gate One&quot;</span><span class="p">],</span>
    <span class="nx">updateSequenceNum</span><span class="o">:</span> <span class="mi">11</span><span class="p">,</span>
    <span class="nx">updated</span><span class="o">:</span> <span class="mi">1356974567922</span><span class="p">,</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;ssh://localhost&quot;</span><span class="p">,</span>
    <span class="nx">visits</span><span class="o">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Most of that should be self-explanatory except the <code class="xref py py-obj docutils literal"><span class="pre">updateSequenceNum</span></code> (aka USN).  The USN value is used to determine when this bookmark was last changed in comparison to the highest USN stored on the server.  By comparing the highest client-side USN against the highest server-side USN we can determine what (if anything) has changed since the last synchronization.  It is much more efficient than enumerating all bookmarks on both the client and server in order to figure out what's different.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.createBookmark">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">createBookmark</code><span class="sig-paren">(</span><em>bmContainer</em>, <em>bookmark</em>, <em>delay</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.createBookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new bookmark element and places it in <em>bmContainer</em>.  Also returns the bookmark element.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>bmContainer</strong> (<em>DOM_node</em>) -- The DOM node we're going to be placing the bookmark.</li>
<li><strong>bookmark</strong> (<em>object</em>) -- A bookmark object (presumably taken from <a class="reference internal" href="#GateOne.Bookmarks.bookmarks" title="GateOne.Bookmarks.bookmarks"><code class="xref js js-attr docutils literal"><span class="pre">GateOne.Bookmarks.bookmarks</span></code></a>)</li>
<li><strong>delay</strong> (<em>number</em>) -- The amount of milliseconds to wait before translating (sliding) the bookmark into view.</li>
<li><strong>ad</strong> (<em>boolean</em>) -- If true, will not bother adding tags or edit/delete/share links.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.createOrUpdateBookmark">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">createOrUpdateBookmark</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.createOrUpdateBookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates or updates a bookmark (in <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.bookmarks</span></code> and localStorage) using the given bookmark <em>obj</em>.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.createPanel">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">createPanel</code><span class="sig-paren">(</span><span class="optional">[</span><em>embedded</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.createPanel" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the bookmarks panel.  If the bookmarks panel already exists it will be destroyed and re-created, resetting the pagination.</p>
<p>If <em>embedded</em> is true then we'll just load the header (without search).</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.createSortOpts">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">createSortOpts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.createSortOpts" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a span representing the current sort direction and &quot;sort by&quot; type.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.deleteBookmark">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">deleteBookmark</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.deleteBookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Asks the user for confirmation then deletes the chosen bookmark...</p>
<p><em>obj</em> can either be a URL (string) or the &quot;go_bm_delete&quot; anchor tag.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not the same thing as <a class="reference internal" href="#GateOne.Bookmarks.removeBookmark" title="GateOne.Bookmarks.removeBookmark"><code class="xref js js-meth docutils literal"><span class="pre">GateOne.Bookmarks.removeBookmark()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.deletedBookmarksSyncComplete">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">deletedBookmarksSyncComplete</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.deletedBookmarksSyncComplete" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the response from the server after we've sent the 'bookmarks_deleted' WebSocket action.  Resets <code class="xref py py-obj docutils literal"><span class="pre">localStorage[GateOne.prefs.prefix+'deletedBookmarks']</span></code> and displays a message to the user indicating how many bookmarks were just deleted.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.editBookmark">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">editBookmark</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.editBookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the bookmark editor for the given <em>obj</em> (the bookmark element on the page).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only meant to be called from a 'bm_edit' anchor tag (as the <em>obj</em>).</p>
</div>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.exportBookmarks">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">exportBookmarks</code><span class="sig-paren">(</span><span class="optional">[</span><em>bookmarks</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.exportBookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to save their bookmarks as a Netscape-style HTML file.  Immediately starts the download.</p>
<p>If <em>bookmarks</em> is given, that array will be what is exported.  Otherwise the complete <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.bookmarks</span></code> array will be exported.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.filterBookmarksBySearchString">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">filterBookmarksBySearchString</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.filterBookmarksBySearchString" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters bookmarks to those matching <em>str</em> (used by the search function).</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.flushIconQueue">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">flushIconQueue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.flushIconQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>Loops over <code class="xref py py-obj docutils literal"><span class="pre">localStorage[GateOne.prefs.prefix+'iconQueue']</span></code> fetching icons until it is empty.</p>
<p>If the queue is currently being processed this function won't do anything when called.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.generateTip">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">generateTip</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.generateTip" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a random, helpful tip for using bookmarks (as a string).</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.getAutotags">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">getAutotags</code><span class="sig-paren">(</span><span class="optional">[</span><em>bookmarks</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.getAutotags" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array of all the autotags in <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.bookmarks</span></code> or <em>bookmarks</em> if given.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ordered alphabetically with the URL types coming before date tags.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.getBookmarkObj">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">getBookmarkObj</code><span class="sig-paren">(</span><em>URL</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.getBookmarkObj" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the bookmark object associated with the given <em>URL</em>.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.getDateTag">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">getDateTag</code><span class="sig-paren">(</span><em>dateObj</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.getDateTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <code class="docutils literal"><span class="pre">Date</span></code> object, returns a string such as &quot;&lt;7 days&quot;.  Suitable for use as an autotag.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.getMaxBookmarks">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">getMaxBookmarks</code><span class="sig-paren">(</span><em>elem</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.getMaxBookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates and returns the number of bookmarks that will fit in the given element (<em>elem</em>).  <em>elem</em> may be an element ID or a DOM node object.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.getTags">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">getTags</code><span class="sig-paren">(</span><span class="optional">[</span><em>bookmarks</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.getTags" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array of all the tags in <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.bookmarks</span></code> or <em>bookmarks</em> if given.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ordered alphabetically</p>
</div>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.highestUSN">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">highestUSN</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.highestUSN" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the highest <code class="xref py py-obj docutils literal"><span class="pre">updateSequenceNum</span></code> that exists in all bookmarks.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.httpIconHandler">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">httpIconHandler</code><span class="sig-paren">(</span><em>bookmark</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.httpIconHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the icon for the given HTTP or HTTPS <em>bookmark</em> and saves it in the bookmarks DB.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.incrementVisits">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">incrementVisits</code><span class="sig-paren">(</span><em>URL</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.incrementVisits" title="Permalink to this definition">¶</a></dt>
<dd><p>Increments by 1 the 'visits' value of the bookmark object associated with the given <em>URL</em>.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.init">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">init</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the bookmarks panel, initializes some important variables, registers the <code class="kbd docutils literal"><span class="pre">Control-Alt-b</span></code> keyboard shortcut, and registers the following WebSocket actions:</p>
<div class="highlight-js"><div class="highlight"><pre><span class="nx">GateOne</span><span class="p">.</span><span class="nx">Net</span><span class="p">.</span><span class="nx">addAction</span><span class="p">(</span><span class="s1">&#39;terminal:bookmarks_updated&#39;</span><span class="p">,</span> <span class="nx">GateOne</span><span class="p">.</span><span class="nx">Bookmarks</span><span class="p">.</span><span class="nx">syncBookmarks</span><span class="p">);</span>
<span class="nx">GateOne</span><span class="p">.</span><span class="nx">Net</span><span class="p">.</span><span class="nx">addAction</span><span class="p">(</span><span class="s1">&#39;terminal:bookmarks_save_result&#39;</span><span class="p">,</span> <span class="nx">GateOne</span><span class="p">.</span><span class="nx">Bookmarks</span><span class="p">.</span><span class="nx">syncComplete</span><span class="p">);</span>
<span class="nx">GateOne</span><span class="p">.</span><span class="nx">Net</span><span class="p">.</span><span class="nx">addAction</span><span class="p">(</span><span class="s1">&#39;terminal:bookmarks_delete_result&#39;</span><span class="p">,</span> <span class="nx">GateOne</span><span class="p">.</span><span class="nx">Bookmarks</span><span class="p">.</span><span class="nx">deletedBookmarksSyncComplete</span><span class="p">);</span>
<span class="nx">GateOne</span><span class="p">.</span><span class="nx">Net</span><span class="p">.</span><span class="nx">addAction</span><span class="p">(</span><span class="s1">&#39;terminal:bookmarks_renamed_tags&#39;</span><span class="p">,</span> <span class="nx">GateOne</span><span class="p">.</span><span class="nx">Bookmarks</span><span class="p">.</span><span class="nx">tagRenameComplete</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.loadBookmarks">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">loadBookmarks</code><span class="sig-paren">(</span><span class="optional">[</span><em>delay</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.loadBookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters/sorts/displays bookmarks and updates the bookmarks panel to reflect the current state of things (draws the tag cloud and ensures the pagination is correct).</p>
<p>If <em>delay</em> (milliseconds) is given, loading of bookmarks will be delayed by that amount before they're drawn (for animation purposes).</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.loadPagination">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">loadPagination</code><span class="sig-paren">(</span><em>bookmarks</em><span class="optional">[</span>, <em>page</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.loadPagination" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the pagination for the given array of bookmarks and returns the pagination node.</p>
<p>If <em>page</em> is given the pagination will highlight the given page number and adjust the prev/next links accordingly.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.loadTagCloud">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">loadTagCloud</code><span class="sig-paren">(</span><span class="optional">[</span><em>active</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.loadTagCloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the tag cloud.  If <em>active</em> is given it must be one of 'tags' or 'autotags'.  It will mark the appropriate header as inactive and load the respective tags.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.openBookmark">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">openBookmark</code><span class="sig-paren">(</span><em>URL</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.openBookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the function in <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.URLHandlers</span></code> associated with the protocol of the given <em>URL</em>.</p>
<p>If no function is registered for the given <em>URL</em> protocol a new browser window will be opened using the given <em>URL</em>.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.openExportDialog">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">openExportDialog</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.openExportDialog" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a dialog where the user can select some options and export their bookmarks.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.openImportDialog">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">openImportDialog</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.openImportDialog" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the form where a user can create or edit a bookmark.</p>
<p>If <em>URL</em> is given, pre-fill the form with the associated bookmark for editing.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.openNewBookmarkForm">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">openNewBookmarkForm</code><span class="sig-paren">(</span><span class="optional">[</span><em>URL</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.openNewBookmarkForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the form where a user can create or edit a bookmark.</p>
<p>If <em>URL</em> is given, pre-fill the form with the associated bookmark for editing.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.openRenameDialog">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">openRenameDialog</code><span class="sig-paren">(</span><em>tagName</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.openRenameDialog" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a dialog where the user can rename the given <em>tagName</em>.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.openSearchDialog">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">openSearchDialog</code><span class="sig-paren">(</span><em>URL</em>, <em>title</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.openSearchDialog" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a dialog where the user can utilize a keyword search <em>URL</em>.  <em>title</em> will be used to create the dialog title like this:  &quot;Keyword Search: <em>title</em>&quot;.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.panelToggleIn">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">panelToggleIn</code><span class="sig-paren">(</span><em>panel</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.panelToggleIn" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when <code class="xref py py-obj docutils literal"><span class="pre">panel_toggle:in</span></code> event is triggered, calls <a class="reference internal" href="#GateOne.Bookmarks.createPanel" title="GateOne.Bookmarks.createPanel"><code class="xref js js-meth docutils literal"><span class="pre">GateOne.Bookmarks.createPanel()</span></code></a> if <em>panel</em> is the Bookmarks panel.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.registerIconHandler">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">registerIconHandler</code><span class="sig-paren">(</span><em>protocol</em>, <em>handler</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.registerIconHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers the given <em>handler</em> as the function to use whenever a bookmark icon needs to be retrieved for the given <em>protocol</em>.</p>
<p>When the given <em>handler</em> is called it will be passed the bookmark object as the only argument.  It is up to the handler to call (or not) <code class="docutils literal"><span class="pre">GateOne.Bookmarks.storeFavicon(bookmark,</span> <span class="pre">&lt;icon</span> <span class="pre">data</span> <span class="pre">URI&gt;);</span></code> to store the icon.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.registerURLHandler">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">registerURLHandler</code><span class="sig-paren">(</span><em>protocol</em>, <em>handler</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.registerURLHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers the given <em>handler</em> as the function to use whenever a bookmark is opened with a matching <em>protocol</em>.</p>
<p>When the given <em>handler</em> is called it will be passed the URL as the only argument.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.removeBookmark">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">removeBookmark</code><span class="sig-paren">(</span><em>url</em><span class="optional">[</span>, <em>callback</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.removeBookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the bookmark matching <em>url</em> from <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.bookmarks</span></code> and saves the change to localStorage.</p>
<p>If <em>callback</em> is given it will be called after the bookmark has been deleted.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not the same thing as <a class="reference internal" href="#GateOne.Bookmarks.deleteBookmark" title="GateOne.Bookmarks.deleteBookmark"><code class="xref js js-meth docutils literal"><span class="pre">GateOne.Bookmarks.deleteBookmark()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.removeFilterDateTag">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">removeFilterDateTag</code><span class="sig-paren">(</span><em>bookmarks</em>, <em>dateTag</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.removeFilterDateTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the given <em>dateTag</em> from the filter list.  <em>bookmarks</em> is unused.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.removeFilterTag">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">removeFilterTag</code><span class="sig-paren">(</span><em>bookmarks</em>, <em>tag</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.removeFilterTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the given <em>tag</em> from the filter list.  <em>bookmarks</em> is unused.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.removeFilterURLTypeTag">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">removeFilterURLTypeTag</code><span class="sig-paren">(</span><em>bookmarks</em>, <em>typeTag</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.removeFilterURLTypeTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the given <em>typeTag</em> from the filter list.  <em>bookmarks</em> is unused.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.renameTag">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">renameTag</code><span class="sig-paren">(</span><em>oldName</em>, <em>newName</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.renameTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Renames the tag matching <em>oldName</em> to be <em>newName</em> for all bookmarks that have it.</p>
</dd></dl>

<dl class="attribute">
<dt id="GateOne.Bookmarks.sortFunctions">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">sortFunctions</code><a class="headerlink" href="#GateOne.Bookmarks.sortFunctions" title="Permalink to this definition">¶</a></dt>
<dd><p>An associative array of functions that are used to sort bookmarks.  When the user clicks on one of the sorting options it assigns one of these functions to <code class="xref js js-meth docutils literal"><span class="pre">GateOne.Bookmarks.sortfunc()</span></code> which is then applied like so:</p>
<div class="highlight-js"><div class="highlight"><pre><span class="nx">bookmarks</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">GateOne</span><span class="p">.</span><span class="nx">Bookmarks</span><span class="p">.</span><span class="nx">sortfunc</span><span class="p">);</span>
</pre></div>
</div>
<dl class="staticmethod">
<dt id="GateOne.Bookmarks.sortFunctions.alphabetical">
<code class="descclassname">GateOne.Bookmarks.sortFunctions.</code><code class="descname">alphabetical</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.sortFunctions.alphabetical" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts bookmarks alphabetically.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="GateOne.Bookmarks.sortFunctions.created">
<code class="descclassname">GateOne.Bookmarks.sortFunctions.</code><code class="descname">created</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.sortFunctions.created" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts bookmarks by date modified followed by alphabetical.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="GateOne.Bookmarks.sortFunctions.visits">
<code class="descclassname">GateOne.Bookmarks.sortFunctions.</code><code class="descname">visits</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.sortFunctions.visits" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts bookmarks according to the number of visits followed by alphabetical.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.storeBookmark">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">storeBookmark</code><span class="sig-paren">(</span><em>bookmarkObj</em><span class="optional">[</span>, <em>callback</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.storeBookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the given <em>bookmarkObj</em> in localStorage.</p>
<p>if <em>callback</em> is given it will be executed after the bookmark is stored with the <em>bookmarkObj</em> as the only argument.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.storeBookmarks">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">storeBookmarks</code><span class="sig-paren">(</span><em>bookmarks</em><span class="optional">[</span>, <em>recreatePanel</em><span class="optional">[</span>, <em>skipTags</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.storeBookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an array of <em>bookmarks</em> and stores them in <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.bookmarks</span></code>.</p>
<p>If <em>recreatePanel</em> is true, the panel will be re-drawn after bookmarks are stored.</p>
<p>If <em>skipTags</em> is true, bookmark tags will be ignored when saving <em>bookmarks</em>.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.storeFavicon">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">storeFavicon</code><span class="sig-paren">(</span><em>bookmark</em>, <em>dataURI</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.storeFavicon" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the given <em>dataURI</em> as the 'favicon' image for the given <em>bookmark</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>dataURI</em> must be pre-encoded <a class="reference external" href="data:URI">data:URI</a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.syncBookmarks">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">syncBookmarks</code><span class="sig-paren">(</span><em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.syncBookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the <code class="xref py py-obj docutils literal"><span class="pre">terminal:bookmarks_updated</span></code> WebSocket action is received from the server.  Removes bookmarks marked as deleted on the server, uploads new bookmarks that are not on the server (yet), and processes any tags that have been renamed.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.syncComplete">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">syncComplete</code><span class="sig-paren">(</span><em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.syncComplete" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the sync (download) is completed.  Stores the current highest <code class="xref py py-obj docutils literal"><span class="pre">updateSequenceNum</span></code> in localStorage, and notifies the user of any errors that occurred during synchronization.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.tagContextMenu">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">tagContextMenu</code><span class="sig-paren">(</span><em>elem</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.tagContextMenu" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when we right-click on a tag <em>elem</em>.  Gives the user the option to rename the tag or cancel the context menu.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.tagRenameComplete">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">tagRenameComplete</code><span class="sig-paren">(</span><em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.tagRenameComplete" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the 'bookmarks_renamed_tags' WebSocket action is received from the server.  Deletes <code class="xref py py-obj docutils literal"><span class="pre">localStorage[GateOne.prefs.prefix+'renamedTags']</span></code> (which stores tags that have been renamed and are awaiting sync) and displays a message to the user indicating that tags were renamed successfully.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.toggleSortOrder">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">toggleSortOrder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.toggleSortOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverses the order of the bookmarks list.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.updateIcon">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">updateIcon</code><span class="sig-paren">(</span><em>bookmark</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.updateIcon" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the handler in <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.iconHandlers</span></code> associated with the given <em>bookmark.url</em> protocol.</p>
<p>If no handler can be found no operation will be performed.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.updateIcons">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">updateIcons</code><span class="sig-paren">(</span><em>urls</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.updateIcons" title="Permalink to this definition">¶</a></dt>
<dd><p>Loops over the given <em>urls</em> attempting to fetch and store their respective favicons.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function is only used when debugging.  It is called by no other functions.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.updateProgress">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">updateProgress</code><span class="sig-paren">(</span><em>name</em>, <em>total</em>, <em>num</em><span class="optional">[</span>, <em>desc</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.updateProgress" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates/updates a progress bar given a <em>name</em>, a <em>total</em>, and <em>num</em> representing the current state of an action.</p>
<p>Optionally, a description (<em>desc</em>) may be provided that will be placed above the progress bar.</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.updateUSN">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">updateUSN</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.updateUSN" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the <code class="xref py py-obj docutils literal"><span class="pre">updateSequenceNum</span></code> of the bookmark matching <em>obj</em> in <code class="xref py py-obj docutils literal"><span class="pre">GateOne.Bookmarks.bookmarks</span></code> (and in localStorage via <a class="reference internal" href="#GateOne.Bookmarks.storeBookmark" title="GateOne.Bookmarks.storeBookmark"><code class="xref js js-meth docutils literal"><span class="pre">storeBookmark()</span></code></a>).</p>
</dd></dl>

<dl class="function">
<dt id="GateOne.Bookmarks.userLoginSync">
<code class="descclassname">GateOne.Bookmarks.</code><code class="descname">userLoginSync</code><span class="sig-paren">(</span><em>username</em><span class="sig-paren">)</span><a class="headerlink" href="#GateOne.Bookmarks.userLoginSync" title="Permalink to this definition">¶</a></dt>
<dd><p>This gets attached to the <code class="xref py py-obj docutils literal"><span class="pre">go:js_loaded</span></code> event.  Calls the server-side <code class="xref py py-obj docutils literal"><span class="pre">terminal:bookmarks_get</span></code> WebSocket action with the current USN (Update Sequence Number) to ensure the user's bookmarks are in sync with what's on the server.</p>
</dd></dl>

</div>
<div class="section" id="module-bookmarks">
<span id="python"></span><h2>Python<a class="headerlink" href="#module-bookmarks" title="Permalink to this headline">¶</a></h2>
<p>bookmarks.py - A plugin for Gate One that adds fancy bookmarking capabilities.</p>
<div class="section" id="hooks">
<h3>Hooks<a class="headerlink" href="#hooks" title="Permalink to this headline">¶</a></h3>
<p>This Python plugin file implements the following hooks:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">hooks</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Web&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">r&quot;/bookmarks/fetchicon&quot;</span><span class="p">,</span> <span class="n">FaviconHandler</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">r&quot;/bookmarks/export&quot;</span><span class="p">,</span> <span class="n">ExportHandler</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">r&quot;/bookmarks/import&quot;</span><span class="p">,</span> <span class="n">ImportHandler</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="s1">&#39;WebSocket&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;terminal:bookmarks_sync&#39;</span><span class="p">:</span> <span class="n">save_bookmarks</span><span class="p">,</span>
        <span class="s1">&#39;terminal:bookmarks_get&#39;</span><span class="p">:</span> <span class="n">get_bookmarks</span><span class="p">,</span>
        <span class="s1">&#39;terminal:bookmarks_deleted&#39;</span><span class="p">:</span> <span class="n">delete_bookmarks</span><span class="p">,</span>
        <span class="s1">&#39;terminal:bookmarks_rename_tags&#39;</span><span class="p">:</span> <span class="n">rename_tags</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s1">&#39;Events&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;terminal:authenticate&#39;</span><span class="p">:</span> <span class="n">send_bookmarks_css_template</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="docstrings">
<h3>Docstrings<a class="headerlink" href="#docstrings" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="bookmarks.unescape">
<code class="descclassname">bookmarks.</code><code class="descname">unescape</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#unescape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.unescape" title="Permalink to this definition">¶</a></dt>
<dd><p>Unescape HTML code refs; c.f. <a class="reference external" href="http://wiki.python.org/moin/EscapingHtml">http://wiki.python.org/moin/EscapingHtml</a></p>
</dd></dl>

<dl class="function">
<dt id="bookmarks.parse_bookmarks_html">
<code class="descclassname">bookmarks.</code><code class="descname">parse_bookmarks_html</code><span class="sig-paren">(</span><em>html</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#parse_bookmarks_html"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.parse_bookmarks_html" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the Netscape-style bookmarks.html in string, <em>html</em> and returns a
list of Bookmark objects.</p>
</dd></dl>

<dl class="function">
<dt id="bookmarks.get_json_tags">
<code class="descclassname">bookmarks.</code><code class="descname">get_json_tags</code><span class="sig-paren">(</span><em>bookmarks</em>, <em>url</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#get_json_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.get_json_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over <em>bookmarks</em> (dict) trying to find tags associated with the
given <em>url</em>.  Returns the tags found as a list.</p>
</dd></dl>

<dl class="function">
<dt id="bookmarks.get_ns_json_bookmarks">
<code class="descclassname">bookmarks.</code><code class="descname">get_ns_json_bookmarks</code><span class="sig-paren">(</span><em>json_dict</em>, <em>bookmarks</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#get_ns_json_bookmarks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.get_ns_json_bookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <em>json_dict</em>, updates <em>bookmarks</em> with each URL as it is found
within.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only works with Netscape-style bookmarks.json files.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="bookmarks.parse_bookmarks_json">
<code class="descclassname">bookmarks.</code><code class="descname">parse_bookmarks_json</code><span class="sig-paren">(</span><em>json_str</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#parse_bookmarks_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.parse_bookmarks_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Given <em>json_str</em>, returns a list of bookmark objects representing the data
contained therein.</p>
</dd></dl>

<dl class="class">
<dt id="bookmarks.BookmarksDB">
<em class="property">class </em><code class="descclassname">bookmarks.</code><code class="descname">BookmarksDB</code><span class="sig-paren">(</span><em>user_dir</em>, <em>user</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#BookmarksDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.BookmarksDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to read and write bookmarks to a file on disk.  Can also synchronize
a given list of bookmarks with what's on disk.  Uses a given bookmark's
<code class="docutils literal"><span class="pre">updateSequenceNum</span></code> to track what wins the &quot;who is newer?&quot; comparison.</p>
<p>Sets up our bookmarks database object and reads everything in.</p>
<dl class="method">
<dt id="bookmarks.BookmarksDB.open_bookmarks">
<code class="descname">open_bookmarks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#BookmarksDB.open_bookmarks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.BookmarksDB.open_bookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the bookmarks stored in self.user_dir.  If not present, an
empty file will be created.</p>
</dd></dl>

<dl class="method">
<dt id="bookmarks.BookmarksDB.save_bookmarks">
<code class="descname">save_bookmarks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#BookmarksDB.save_bookmarks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.BookmarksDB.save_bookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves self.bookmarks to self.bookmarks_path as a JSON-encoded list.</p>
</dd></dl>

<dl class="method">
<dt id="bookmarks.BookmarksDB.sync_bookmarks">
<code class="descname">sync_bookmarks</code><span class="sig-paren">(</span><em>bookmarks</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#BookmarksDB.sync_bookmarks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.BookmarksDB.sync_bookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Given <em>bookmarks</em>, synchronize with self.bookmarks doing conflict
resolution and whatnot.</p>
</dd></dl>

<dl class="method">
<dt id="bookmarks.BookmarksDB.delete_bookmark">
<code class="descname">delete_bookmark</code><span class="sig-paren">(</span><em>bookmark</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#BookmarksDB.delete_bookmark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.BookmarksDB.delete_bookmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the given <em>bookmark</em>.</p>
</dd></dl>

<dl class="method">
<dt id="bookmarks.BookmarksDB.get_bookmarks">
<code class="descname">get_bookmarks</code><span class="sig-paren">(</span><em>updateSequenceNum=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#BookmarksDB.get_bookmarks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.BookmarksDB.get_bookmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of bookmarks newer than <em>updateSequenceNum</em>.
If <em>updateSequenceNum</em> is 0 or undefined, all bookmarks will be
returned.</p>
</dd></dl>

<dl class="method">
<dt id="bookmarks.BookmarksDB.get_highest_USN">
<code class="descname">get_highest_USN</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#BookmarksDB.get_highest_USN"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.BookmarksDB.get_highest_USN" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the highest updateSequenceNum in self.bookmarks</p>
</dd></dl>

<dl class="method">
<dt id="bookmarks.BookmarksDB.rename_tag">
<code class="descname">rename_tag</code><span class="sig-paren">(</span><em>old_tag</em>, <em>new_tag</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#BookmarksDB.rename_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.BookmarksDB.rename_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Goes through all bookmarks and renames all tags named <em>old_tag</em> to be
<em>new_tag</em>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="bookmarks.FaviconHandler">
<em class="property">class </em><code class="descclassname">bookmarks.</code><code class="descname">FaviconHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#FaviconHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.FaviconHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrives the biggest favicon-like icon at the given URL.  It will try to
fetch apple-touch-icons (which can be nice and big) before it falls back
to grabbing the favicon.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Works with GET and POST requests but POST is preferred since it keeps the URL from winding up in the server logs.</p>
</div>
<dl class="method">
<dt id="bookmarks.FaviconHandler.get_favicon_url">
<code class="descname">get_favicon_url</code><span class="sig-paren">(</span><em>html</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#FaviconHandler.get_favicon_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.FaviconHandler.get_favicon_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses <em>html</em> looking for a favicon URL.  Returns a tuple of:</p>
<div class="highlight-python"><div class="highlight"><pre>(&lt;url&gt;, &lt;mimetype&gt;)
</pre></div>
</div>
<p>If no favicon can be found, returns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="bookmarks.FaviconHandler.icon_multifetch">
<code class="descname">icon_multifetch</code><span class="sig-paren">(</span><em>urls</em>, <em>response</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#FaviconHandler.icon_multifetch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.FaviconHandler.icon_multifetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the icon at the given URLs, stopping when it finds the biggest.
If an icon is not found, calls itself again with the next icon URL.
If the icon is found, writes it to the client and finishes the request.</p>
</dd></dl>

<dl class="method">
<dt id="bookmarks.FaviconHandler.icon_fetch">
<code class="descname">icon_fetch</code><span class="sig-paren">(</span><em>url</em>, <em>mimetype</em>, <em>response</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#FaviconHandler.icon_fetch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.FaviconHandler.icon_fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the fetched icon to the client.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="bookmarks.ImportHandler">
<em class="property">class </em><code class="descclassname">bookmarks.</code><code class="descname">ImportHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#ImportHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.ImportHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a bookmarks.html in a POST and returns a list of bookmarks in JSON
format</p>
</dd></dl>

<dl class="class">
<dt id="bookmarks.ExportHandler">
<em class="property">class </em><code class="descclassname">bookmarks.</code><code class="descname">ExportHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#ExportHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.ExportHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a JSON-encoded list of bookmarks and returns a Netscape-style HTML
file.</p>
</dd></dl>

<dl class="function">
<dt id="bookmarks.send_bookmarks_css_template">
<code class="descclassname">bookmarks.</code><code class="descname">send_bookmarks_css_template</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/bookmarks.html#send_bookmarks_css_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bookmarks.send_bookmarks_css_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends our bookmarks.css template to the client using the 'load_style'
WebSocket action.  The rendered template will be saved in Gate One's
'cache_dir'.</p>
</dd></dl>

</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="plugin_convenience.html" class="btn btn-neutral float-right" title="The Convenience Plugin" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="js_terminal_input.html" class="btn btn-neutral" title="terminal_input.js" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Liftoff Software Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
window.onload = function(e) {
    // Make our collapseindex elements actually collapsible
    $('<span class="collapsindextitle">Index</span> <a class="showhide">[show]</a>').insertBefore('.collapseindex');
    $('.showhide').each(function(index, value){
        var showHide = $(this);
        showHide.click(function() {
            if (this.innerHTML == "[hide]") {
                this.innerHTML = "[show]";
            } else {
                this.innerHTML = "[hide]";
            }
            $(this).next('.collapseindex').toggle(1); // This should always be the next .collapseindex element
        });
    });
    $('.collapseindex').each(function(index, value){
        // Start them out hidden
        $(this).hide();
    });
}
</script>


</body>
</html>