

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-29645087-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>utils.py - Supporting Functions &mdash; Gate One 1.2.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
  

  
    <link rel="top" title="Gate One 1.2.0 documentation" href="../index.html"/>
        <link rel="up" title="Developer Documentation" href="index.html"/>
        <link rel="next" title="gateone.js" href="js_gateone.html"/>
        <link rel="prev" title="termio.py - Terminal Input/Output Module" href="termio.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Gate One
          

          
          </a>

          
            
            
              <div class="version">
                1.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../About/index.html">About Gate One</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Applications/index.html">Gate One Applications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#python-code">Python Code</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="authentication.html"><code class="docutils literal"><span class="pre">authentication.py</span></code> - Authentication Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="authorization.html"><code class="docutils literal"><span class="pre">authorization.py</span></code> - Authentication Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="ctypes_pam.html"><code class="docutils literal"><span class="pre">ctypes_pam.py</span></code> - PAM Authentication Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="pam.html"><code class="docutils literal"><span class="pre">pam.py</span></code> - A PAM Authentication Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sso.html"><code class="docutils literal"><span class="pre">sso.py</span></code> - A Tornado Kerberos Single Sign-On Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html"><code class="docutils literal"><span class="pre">log.py</span></code> - Gate One Logging Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="logviewer.html"><code class="docutils literal"><span class="pre">logviewer.py</span></code> - Session Log Viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="server.html"><code class="docutils literal"><span class="pre">server.py</span></code> - Gate One's Core Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="terminal.html"><code class="docutils literal"><span class="pre">terminal.py</span></code> - A Pure Python Terminal Emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="termio.html"><code class="docutils literal"><span class="pre">termio.py</span></code> - Terminal Input/Output Module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href=""><code class="docutils literal"><span class="pre">utils.py</span></code> - Supporting Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#gate-one-utility-functions-and-classes">Gate One Utility Functions and Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#javascript-code">JavaScript Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#plugin-code">Plugin Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#developing-plugins">Developing Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#embeddeding-gate-one-into-other-applications">Embeddeding Gate One Into Other Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ReleaseNotes/index.html">Release Notes / Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Gate One</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Developer Documentation</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">utils.py</span></code> - Supporting Functions</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Developer/utils.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-gateone.core.utils">
<span id="utils-py-supporting-functions"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">utils.py</span></code> - Supporting Functions<a class="headerlink" href="#module-gateone.core.utils" title="Permalink to this headline">¶</a></h1>
<div class="section" id="gate-one-utility-functions-and-classes">
<span id="utils-py"></span><h2>Gate One Utility Functions and Classes<a class="headerlink" href="#gate-one-utility-functions-and-classes" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="gateone.core.utils.MimeTypeFail">
<em class="property">exception </em><code class="descclassname">gateone.core.utils.</code><code class="descname">MimeTypeFail</code><a class="reference internal" href="../_modules/gateone/core/utils.html#MimeTypeFail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.MimeTypeFail" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised by <a class="reference internal" href="#gateone.core.utils.create_data_uri" title="gateone.core.utils.create_data_uri"><code class="xref py py-obj docutils literal"><span class="pre">create_data_uri</span></code></a> if the mimetype of a file could not be guessed.</p>
</dd></dl>

<dl class="exception">
<dt id="gateone.core.utils.SSLGenerationError">
<em class="property">exception </em><code class="descclassname">gateone.core.utils.</code><code class="descname">SSLGenerationError</code><a class="reference internal" href="../_modules/gateone/core/utils.html#SSLGenerationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.SSLGenerationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised by <a class="reference internal" href="#gateone.core.utils.gen_self_signed_ssl" title="gateone.core.utils.gen_self_signed_ssl"><code class="xref py py-obj docutils literal"><span class="pre">gen_self_signed_ssl</span></code></a> if an error is encountered generating a
self-signed SSL certificate.</p>
</dd></dl>

<dl class="exception">
<dt id="gateone.core.utils.ChownError">
<em class="property">exception </em><code class="descclassname">gateone.core.utils.</code><code class="descname">ChownError</code><a class="reference internal" href="../_modules/gateone/core/utils.html#ChownError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.ChownError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised by <a class="reference internal" href="#gateone.core.utils.recursive_chown" title="gateone.core.utils.recursive_chown"><code class="xref py py-obj docutils literal"><span class="pre">recursive_chown</span></code></a> if an OSError is encountered while trying to
recursively chown a directory.</p>
</dd></dl>

<dl class="class">
<dt id="gateone.core.utils.AutoExpireDict">
<em class="property">class </em><code class="descclassname">gateone.core.utils.</code><code class="descname">AutoExpireDict</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#AutoExpireDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.AutoExpireDict" title="Permalink to this definition">¶</a></dt>
<dd><p>An override of Python's <code class="xref py py-obj docutils literal"><span class="pre">dict</span></code> that expires keys after a given
<em>_expire_timeout</em> timeout (<code class="xref py py-obj docutils literal"><span class="pre">datetime.timedelta</span></code>).  The default expiration
is one hour.  It is used like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">expiring_dict</span> <span class="o">=</span> <span class="n">AutoExpireDict</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expiring_dict</span><span class="p">[</span><span class="s1">&#39;somekey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;some value&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># You can see when this key was created:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">expiring_dict</span><span class="o">.</span><span class="n">creation_times</span><span class="p">[</span><span class="s1">&#39;somekey&#39;</span><span class="p">])</span>
<span class="go">2013-04-15 18:44:18.224072</span>
</pre></div>
</div>
<p>10 minutes later your key will be gone:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;somekey&#39;</span> <span class="ow">in</span> <span class="n">expiring_dict</span>
<span class="go">False</span>
</pre></div>
</div>
<p>The 'timeout' may be be given as a <code class="xref py py-obj docutils literal"><span class="pre">datetime.timedelta</span></code> object or a string
like, &quot;1d&quot;, &quot;30s&quot; (will be passed through the <a class="reference internal" href="#gateone.core.utils.convert_to_timedelta" title="gateone.core.utils.convert_to_timedelta"><code class="xref py py-obj docutils literal"><span class="pre">convert_to_timedelta</span></code></a>
function).</p>
<p>By default <a class="reference internal" href="#gateone.core.utils.AutoExpireDict" title="gateone.core.utils.AutoExpireDict"><code class="xref py py-obj docutils literal"><span class="pre">AutoExpireDict</span></code></a> will check for expired keys every 30 seconds but
this can be changed by setting the 'interval':</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">expiring_dict</span> <span class="o">=</span> <span class="n">AutoExpireDict</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span> <span class="c1"># 5 secs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or to change it after you&#39;ve created one:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expiring_dict</span><span class="o">.</span><span class="n">interval</span> <span class="o">=</span> <span class="s2">&quot;10s&quot;</span>
</pre></div>
</div>
<p>The 'interval' may be an integer, a <code class="xref py py-obj docutils literal"><span class="pre">datetime.timedelta</span></code> object, or a string
such as '10s' or '5m' (will be passed through the <a class="reference internal" href="#gateone.core.utils.convert_to_timedelta" title="gateone.core.utils.convert_to_timedelta"><code class="xref py py-obj docutils literal"><span class="pre">convert_to_timedelta</span></code></a>
function).</p>
<p>If there are no keys remaining the <code class="xref py py-obj docutils literal"><span class="pre">tornado.ioloop.PeriodicCallback</span></code> (
<code class="docutils literal"><span class="pre">self._key_watcher</span></code>) that checks expiration will be automatically stopped.
As soon as a new key is added it will be started back up again.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only works if there's a running instances of <code class="xref py py-obj docutils literal"><span class="pre">tornado.ioloop.IOLoop</span></code>.</p>
</div>
<dl class="attribute">
<dt id="gateone.core.utils.AutoExpireDict.timeout">
<code class="descname">timeout</code><a class="headerlink" href="#gateone.core.utils.AutoExpireDict.timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-obj docutils literal"><span class="pre">property</span></code> that controls how long a key will last before being
automatically removed.  May be be given as a <code class="xref py py-obj docutils literal"><span class="pre">datetime.timedelta</span></code>
object or a string like, &quot;1d&quot;, &quot;30s&quot; (will be passed through the
<a class="reference internal" href="#gateone.core.utils.convert_to_timedelta" title="gateone.core.utils.convert_to_timedelta"><code class="xref py py-obj docutils literal"><span class="pre">convert_to_timedelta</span></code></a> function).</p>
</dd></dl>

<dl class="attribute">
<dt id="gateone.core.utils.AutoExpireDict.interval">
<code class="descname">interval</code><a class="headerlink" href="#gateone.core.utils.AutoExpireDict.interval" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-obj docutils literal"><span class="pre">property</span></code> that controls how often we check for expired keys.  May be
given as milliseconds (integer), a <code class="xref py py-obj docutils literal"><span class="pre">datetime.timedelta</span></code> object, or a
string like, &quot;1d&quot;, &quot;30s&quot; (will be passed through the
<a class="reference internal" href="#gateone.core.utils.convert_to_timedelta" title="gateone.core.utils.convert_to_timedelta"><code class="xref py py-obj docutils literal"><span class="pre">convert_to_timedelta</span></code></a> function).</p>
</dd></dl>

<dl class="method">
<dt id="gateone.core.utils.AutoExpireDict.renew">
<code class="descname">renew</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#AutoExpireDict.renew"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.AutoExpireDict.renew" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the timeout on the given <em>key</em>; like it was just created.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.core.utils.AutoExpireDict.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#AutoExpireDict.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.AutoExpireDict.update" title="Permalink to this definition">¶</a></dt>
<dd><p>An override that calls <code class="docutils literal"><span class="pre">self.renew()</span></code> for every key that gets updated.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.core.utils.AutoExpireDict.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#AutoExpireDict.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.AutoExpireDict.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>An override that empties <code class="docutils literal"><span class="pre">self.creation_times</span></code> and calls
<code class="docutils literal"><span class="pre">self._key_watcher.stop()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.core.utils.AutoExpireDict._timeout_checker">
<code class="descname">_timeout_checker</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#AutoExpireDict._timeout_checker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.AutoExpireDict._timeout_checker" title="Permalink to this definition">¶</a></dt>
<dd><p>Walks <code class="docutils literal"><span class="pre">self</span></code> and removes keys that have passed the expiration point.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gateone.core.utils.memoize">
<em class="property">class </em><code class="descclassname">gateone.core.utils.</code><code class="descname">memoize</code><span class="sig-paren">(</span><em>fn</em>, <em>timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#memoize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.memoize" title="Permalink to this definition">¶</a></dt>
<dd><p>A memoization decorator that works with multiple arguments as well as
unhashable arguments (e.g. dicts).  It also self-expires any memoized
calls after the timedelta specified via <em>timeout</em>.</p>
<p>If a <em>timeout</em> is not given memoized information will be discared after five
minutes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Expiration checks will be performed every 30 seconds.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.noop">
<code class="descclassname">gateone.core.utils.</code><code class="descname">noop</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#noop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.noop" title="Permalink to this definition">¶</a></dt>
<dd><p>Do nothing (i.e. &quot;No Operation&quot;)</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.debug_info">
<code class="descclassname">gateone.core.utils.</code><code class="descname">debug_info</code><span class="sig-paren">(</span><em>name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#debug_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.debug_info" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns a string like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">debug_info</span><span class="p">(</span><span class="s1">&#39;some_function&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>
<span class="go">&#39;some_function(5, 10, foo=&quot;bar&quot;)&#39;</span>
</pre></div>
</div>
<p>Primarily aimed at debugging.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.write_pid">
<code class="descclassname">gateone.core.utils.</code><code class="descname">write_pid</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#write_pid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.write_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes our PID to <em>path</em>.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.read_pid">
<code class="descclassname">gateone.core.utils.</code><code class="descname">read_pid</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#read_pid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.read_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads our current PID from <em>path</em>.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.remove_pid">
<code class="descclassname">gateone.core.utils.</code><code class="descname">remove_pid</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#remove_pid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.remove_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the PID file at <em>path</em>.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.shell_command">
<code class="descclassname">gateone.core.utils.</code><code class="descname">shell_command</code><span class="sig-paren">(</span><em>cmd</em>, <em>timeout_duration=5</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#shell_command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.shell_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the SIGCHLD signal handler (if necessary), executes <em>cmd</em> via
<code class="xref py py-func docutils literal"><span class="pre">getstatusoutput()</span></code>, then re-enables the SIGCHLD handler (if
it was set to something other than SIG_DFL).  Returns the result of
<code class="xref py py-func docutils literal"><span class="pre">getstatusoutput()</span></code> which is a tuple in the form of:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="n">exitstatus</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
<p>If the command takes longer than <em>timeout_duration</em> seconds, it will be
auto-killed and the following will be returned:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;ERROR: Timeout running shell command&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.json_encode">
<code class="descclassname">gateone.core.utils.</code><code class="descname">json_encode</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#json_encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.json_encode" title="Permalink to this definition">¶</a></dt>
<dd><p>On some platforms (CentOS 6.2, specifically) <code class="xref py py-obj docutils literal"><span class="pre">tornado.escape.json_decode</span></code>
doesn't seem to work just right when it comes to returning unicode strings.
This is just a wrapper that ensures that the returned string is unicode.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.gen_self_signed_ssl">
<code class="descclassname">gateone.core.utils.</code><code class="descname">gen_self_signed_ssl</code><span class="sig-paren">(</span><em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#gen_self_signed_ssl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.gen_self_signed_ssl" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a self-signed SSL certificate using <code class="xref py py-obj docutils literal"><span class="pre">pyOpenSSL</span></code> or the
<a class="reference external" href="http://www.openssl.org/docs/apps/openssl.html">openssl</a> command
depending on what's available,  The resulting key/certificate will use the
RSA algorithm at 4096 bits.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.gen_self_signed_openssl">
<code class="descclassname">gateone.core.utils.</code><code class="descname">gen_self_signed_openssl</code><span class="sig-paren">(</span><em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#gen_self_signed_openssl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.gen_self_signed_openssl" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will generate a secure self-signed SSL key/certificate pair
(using the <a class="reference external" href="http://www.openssl.org/docs/apps/openssl.html">openssl</a>
command) saving the result as 'certificate.pem' and 'keyfile.pem' to <em>path</em>.
If <em>path</em> is not given the result will be saved in the current working
directory.  The certificate will be valid for 10 years.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The self-signed certificate will utilize 4096-bit RSA encryption.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.gen_self_signed_pyopenssl">
<code class="descclassname">gateone.core.utils.</code><code class="descname">gen_self_signed_pyopenssl</code><span class="sig-paren">(</span><em>notAfter=None</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#gen_self_signed_pyopenssl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.gen_self_signed_pyopenssl" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will generate a secure self-signed SSL key/certificate pair
(using <code class="xref py py-obj docutils literal"><span class="pre">pyOpenSSL</span></code>) saving the result as 'certificate.pem' and 'keyfile.pem'
in <em>path</em>.  If <em>path</em> is not given the result will be saved in the current
working directory.  By default the certificate will be valid for 10 years
but this can be overridden by passing a valid timestamp via the
<em>notAfter</em> argument.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gen_self_signed_ssl</span><span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span> <span class="c1"># 1-year certificate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gen_self_signed_ssl</span><span class="p">()</span> <span class="c1"># 10-year certificate</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The self-signed certificate will utilize 4096-bit RSA encryption.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.none_fix">
<code class="descclassname">gateone.core.utils.</code><code class="descname">none_fix</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#none_fix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.none_fix" title="Permalink to this definition">¶</a></dt>
<dd><p>If <em>val</em> is a string that utlimately means 'none', return None.  Otherwise
return <em>val</em> as-is.  Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">none_fix</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">none_fix</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">none_fix</span><span class="p">(</span><span class="s1">&#39;whatever&#39;</span><span class="p">)</span>
<span class="go">&#39;whatever&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.str2bool">
<code class="descclassname">gateone.core.utils.</code><code class="descname">str2bool</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#str2bool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.str2bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts strings like, 'false', 'true', '0', and '1' into their boolean
equivalents (in Python).  If no logical match is found, return False.
Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">str2bool</span><span class="p">(</span><span class="s1">&#39;false&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str2bool</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str2bool</span><span class="p">(</span><span class="s1">&#39;whatever&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.generate_session_id">
<code class="descclassname">gateone.core.utils.</code><code class="descname">generate_session_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#generate_session_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.generate_session_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a random, 45-character session ID.  Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">generate_session_id</span><span class="p">()</span>
<span class="go">&quot;NzY4YzFmNDdhMTM1NDg3Y2FkZmZkMWJmYjYzNjBjM2Y5O&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.mkdir_p">
<code class="descclassname">gateone.core.utils.</code><code class="descname">mkdir_p</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#mkdir_p"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.mkdir_p" title="Permalink to this definition">¶</a></dt>
<dd><p>Pythonic version of &quot;mkdir -p&quot;.  Example equivalents:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mkdir_p</span><span class="p">(</span><span class="s1">&#39;/tmp/test/testing&#39;</span><span class="p">)</span> <span class="c1"># Does the same thing as...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;mkdir -p /tmp/test/testing&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This doesn't actually call any external commands.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.cmd_var_swap">
<code class="descclassname">gateone.core.utils.</code><code class="descname">cmd_var_swap</code><span class="sig-paren">(</span><em>cmd</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#cmd_var_swap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.cmd_var_swap" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <em>cmd</em> with %variable% replaced with the keys/values passed in via
<em>kwargs</em>.  This function is used by Gate One's Terminal application to
swap the following Gate One variables in defined terminal 'commands':</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>%SESSION%</td>
<td><em>session</em></td>
</tr>
<tr class="row-even"><td>%SESSION_DIR%</td>
<td><em>session_dir</em></td>
</tr>
<tr class="row-odd"><td>%SESSION_HASH%</td>
<td><em>session_hash</em></td>
</tr>
<tr class="row-even"><td>%USERDIR%</td>
<td><em>user_dir</em></td>
</tr>
<tr class="row-odd"><td>%USER%</td>
<td><em>user</em></td>
</tr>
<tr class="row-even"><td>%TIME%</td>
<td><em>time</em></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>This allows for unique or user-specific values to be swapped into command
line arguments like so:</p>
<div class="highlight-python"><div class="highlight"><pre>ssh_connect.py -M -S &#39;%SESSION%/%SESSION%/%r@%L:%p&#39;
</pre></div>
</div>
<p>Could become:</p>
<div class="highlight-python"><div class="highlight"><pre>ssh_connect.py -M -S &#39;/tmp/gateone/NWI0YzYxNzAwMTA3NGYyZmI0OWJmODczYmQyMjQwMDYwM/%r@%L:%p&#39;
</pre></div>
</div>
<p>Here's an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;echo &#39;</span><span class="si">%F</span><span class="s2">OO</span><span class="si">% %</span><span class="s2">BAR%&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cmd_var_swap</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="s2">&quot;FOOYEAH,&quot;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s2">&quot;BAR NONE!&quot;</span><span class="p">)</span>
<span class="go">&quot;echo &#39;FOOYEAH, BAR NONE!&#39;&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The variables passed into this function via <em>kwargs</em> are case
insensitive.  <code class="xref py py-obj docutils literal"><span class="pre">cmd_var_swap(cmd,</span> <span class="pre">session=var)</span></code> would produce the same
output as <code class="xref py py-obj docutils literal"><span class="pre">cmd_var_swap(cmd,</span> <span class="pre">SESSION=var)</span></code>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.short_hash">
<code class="descclassname">gateone.core.utils.</code><code class="descname">short_hash</code><span class="sig-paren">(</span><em>to_shorten</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#short_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.short_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts <em>to_shorten</em> into a really short hash depenendent on the length of
<em>to_shorten</em>.  The result will be safe for use as a file name.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Collisions are possible but <em>highly</em> unlikely because of how this method
is typically used.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.random_words">
<code class="descclassname">gateone.core.utils.</code><code class="descname">random_words</code><span class="sig-paren">(</span><em>n=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#random_words"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.random_words" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <em>n</em> random English words (as a tuple of strings) from the
<code class="xref py py-obj docutils literal"><span class="pre">english_wordlist.txt</span></code> file (bundled with Gate One).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In Python 2 the words will be Unicode strings.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.get_process_tree">
<code class="descclassname">gateone.core.utils.</code><code class="descname">get_process_tree</code><span class="sig-paren">(</span><em>parent_pid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#get_process_tree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.get_process_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of child pids that were spawned from <em>parent_pid</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Will include parent_pid in the output list.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.kill_dtached_proc_bsd">
<code class="descclassname">gateone.core.utils.</code><code class="descname">kill_dtached_proc_bsd</code><span class="sig-paren">(</span><em>session</em>, <em>location</em>, <em>term</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#kill_dtached_proc_bsd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.kill_dtached_proc_bsd" title="Permalink to this definition">¶</a></dt>
<dd><p>A BSD-specific implementation of <a class="reference internal" href="#gateone.core.utils.kill_dtached_proc" title="gateone.core.utils.kill_dtached_proc"><code class="xref py py-obj docutils literal"><span class="pre">kill_dtached_proc</span></code></a> since Macs don't have
/proc.  Seems simpler than <a class="reference internal" href="#gateone.core.utils.kill_dtached_proc" title="gateone.core.utils.kill_dtached_proc"><code class="xref py py-func docutils literal"><span class="pre">kill_dtached_proc()</span></code></a> but actually having to
call a subprocess is less efficient (due to the sophisticated signal
handling required by <a class="reference internal" href="#gateone.core.utils.shell_command" title="gateone.core.utils.shell_command"><code class="xref py py-func docutils literal"><span class="pre">shell_command()</span></code></a>).</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.killall_bsd">
<code class="descclassname">gateone.core.utils.</code><code class="descname">killall_bsd</code><span class="sig-paren">(</span><em>session_dir</em>, <em>pid_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#killall_bsd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.killall_bsd" title="Permalink to this definition">¶</a></dt>
<dd><p>A BSD-specific version of <a class="reference internal" href="#gateone.core.utils.killall" title="gateone.core.utils.killall"><code class="xref py py-obj docutils literal"><span class="pre">killall</span></code></a> since Macs don't have /proc.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>pid_file</em> is not used by this function.  It is simply here to provide
compatibility with <a class="reference internal" href="#gateone.core.utils.killall" title="gateone.core.utils.killall"><code class="xref py py-obj docutils literal"><span class="pre">killall</span></code></a>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.kill_session_processes">
<code class="descclassname">gateone.core.utils.</code><code class="descname">kill_session_processes</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#kill_session_processes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.kill_session_processes" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills all processes that match a given <em>session</em> (which is a unique,
45-character string).</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.entry_point_files">
<code class="descclassname">gateone.core.utils.</code><code class="descname">entry_point_files</code><span class="sig-paren">(</span><em>ep_group</em>, <em>enabled=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#entry_point_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.entry_point_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an entry point group name (<em>ep_group</em>), returns a dict of available
Python, JS, and CSS plugins for Gate One:</p>
<div class="highlight-python"><div class="highlight"><pre>{
    &#39;css&#39;: [&#39;editor/static/codemirror.css&#39;],
    &#39;js&#39;: [&#39;editor/static/codemirror.js&#39;, &#39;editor/static/editor.js&#39;],
    &#39;py&#39;: [&lt;module &#39;gateone.plugins.editor&#39; from &#39;gateone/plugins/editor/__init__.pyc&#39;&gt;]
}
</pre></div>
</div>
<p>Optionally, the returned dict will include only those modules and files for
plugins in the <em>enabled</em> list (if given).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Python plugins will be imported automatically as part of the
discovery process.</p>
</div>
<p>To do this it uses the <code class="xref py py-obj docutils literal"><span class="pre">pkg_resources</span></code> module from setuptools.  For plugins
to be imported correctly they need to register themselves using the given
<code class="xref py py-obj docutils literal"><span class="pre">entry_point</span></code> group (<em>ep_group</em>) in their setup.py.  Gate One (currently)
uses the following entry point group names:</p>
<blockquote>
<div><ul class="simple">
<li>go_plugins</li>
<li>go_applications</li>
<li>go_applications_plugins</li>
</ul>
</div></blockquote>
<p>...but this function can return the JS, CSS, and Python modules for any
entry point that uses the same module_name/static/ layout.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.load_modules">
<code class="descclassname">gateone.core.utils.</code><code class="descname">load_modules</code><span class="sig-paren">(</span><em>modules</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#load_modules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.load_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of Python <em>modules</em>, imports them.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Assumes they're all in <code class="xref py py-obj docutils literal"><span class="pre">sys.path</span></code>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.merge_handlers">
<code class="descclassname">gateone.core.utils.</code><code class="descname">merge_handlers</code><span class="sig-paren">(</span><em>handlers</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#merge_handlers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.merge_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of Tornado <em>handlers</em> like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span>
    <span class="p">(</span><span class="s2">r&quot;/&quot;</span><span class="p">,</span> <span class="n">MainHandler</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">r&quot;/ws&quot;</span><span class="p">,</span> <span class="n">TerminalWebSocket</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">r&quot;/auth&quot;</span><span class="p">,</span> <span class="n">AuthHandler</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">r&quot;/style&quot;</span><span class="p">,</span> <span class="n">StyleHandler</span><span class="p">),</span>
        <span class="o">...</span>
    <span class="p">(</span><span class="s2">r&quot;/style&quot;</span><span class="p">,</span> <span class="n">SomePluginHandler</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>...and returns a list with duplicate handlers removed; giving precedence to
handlers with higher indexes.  This allows plugins to override Gate One's
default handlers.  Given the above, this is what would be returned:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span>
    <span class="p">(</span><span class="s2">r&quot;/&quot;</span><span class="p">,</span> <span class="n">MainHandler</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">r&quot;/ws&quot;</span><span class="p">,</span> <span class="n">TerminalWebSocket</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">r&quot;/auth&quot;</span><span class="p">,</span> <span class="n">AuthHandler</span><span class="p">),</span>
        <span class="o">...</span>
    <span class="p">(</span><span class="s2">r&quot;/style&quot;</span><span class="p">,</span> <span class="n">SomePluginHandler</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This example would replace the default &quot;/style&quot; handler with
SomePluginHandler; overriding Gate One's default StyleHandler.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.convert_to_timedelta">
<code class="descclassname">gateone.core.utils.</code><code class="descname">convert_to_timedelta</code><span class="sig-paren">(</span><em>time_val</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#convert_to_timedelta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.convert_to_timedelta" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <em>time_val</em> (string) such as '5d', returns a <code class="xref py py-obj docutils literal"><span class="pre">datetime.timedelta</span></code>
object representing the given value (e.g. <code class="xref py py-obj docutils literal"><span class="pre">timedelta(days=5)</span></code>).  Accepts the
following '&lt;num&gt;&lt;char&gt;' formats:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="26%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Character</th>
<th class="head">Meaning</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>(none)</td>
<td>Milliseconds</td>
<td>'500' -&gt; 500 Milliseconds</td>
</tr>
<tr class="row-odd"><td>s</td>
<td>Seconds</td>
<td>'60s' -&gt; 60 Seconds</td>
</tr>
<tr class="row-even"><td>m</td>
<td>Minutes</td>
<td>'5m'  -&gt; 5 Minutes</td>
</tr>
<tr class="row-odd"><td>h</td>
<td>Hours</td>
<td>'24h' -&gt; 24 Hours</td>
</tr>
<tr class="row-even"><td>d</td>
<td>Days</td>
<td>'7d'  -&gt; 7 Days</td>
</tr>
<tr class="row-odd"><td>M</td>
<td>Months</td>
<td>'2M'  -&gt; 2 Months</td>
</tr>
<tr class="row-even"><td>y</td>
<td>Years</td>
<td>'10y' -&gt; 10 Years</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">convert_to_timedelta</span><span class="p">(</span><span class="s1">&#39;7d&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(7)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert_to_timedelta</span><span class="p">(</span><span class="s1">&#39;24h&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert_to_timedelta</span><span class="p">(</span><span class="s1">&#39;60m&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(0, 3600)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert_to_timedelta</span><span class="p">(</span><span class="s1">&#39;120s&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(0, 120)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.convert_to_bytes">
<code class="descclassname">gateone.core.utils.</code><code class="descname">convert_to_bytes</code><span class="sig-paren">(</span><em>size_val</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#convert_to_bytes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.convert_to_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <em>size_val</em> (string) such as '100M', returns an integer representing
an equivalent amount of bytes.  Accepts the following '&lt;num&gt;&lt;char&gt;' formats:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="18%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Character</th>
<th class="head">Meaning</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>B (or none)</td>
<td>Bytes</td>
<td>'100' or '100b' -&gt; 100</td>
</tr>
<tr class="row-odd"><td>K</td>
<td>Kilobytes</td>
<td>'1k' -&gt; 1024</td>
</tr>
<tr class="row-even"><td>M</td>
<td>Megabytes</td>
<td>'1m' -&gt; 1048576</td>
</tr>
<tr class="row-odd"><td>G</td>
<td>Gigabytes</td>
<td>'1g' -&gt; 1073741824</td>
</tr>
<tr class="row-even"><td>T</td>
<td>Terabytes</td>
<td>'1t' -&gt; 1099511627776</td>
</tr>
<tr class="row-odd"><td>P</td>
<td>Petabytes</td>
<td>'1p' -&gt; 1125899906842624</td>
</tr>
<tr class="row-even"><td>E</td>
<td>Exabytes</td>
<td>'1e' -&gt; 1152921504606846976</td>
</tr>
<tr class="row-odd"><td>Z</td>
<td>Zettabytes</td>
<td>'1z' -&gt; 1180591620717411303424L</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>Yottabytes</td>
<td>'7y' -&gt; 1208925819614629174706176L</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If no character is given the <em>size_val</em> will be assumed to be in bytes.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">All characters will be converted to upper case before conversion
(case-insensitive).</p>
</div>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">convert_to_bytes</span><span class="p">(</span><span class="s1">&#39;2M&#39;</span><span class="p">)</span>
<span class="go">2097152</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert_to_bytes</span><span class="p">(</span><span class="s1">&#39;2g&#39;</span><span class="p">)</span>
<span class="go">2147483648</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.total_seconds">
<code class="descclassname">gateone.core.utils.</code><code class="descname">total_seconds</code><span class="sig-paren">(</span><em>td</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#total_seconds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.total_seconds" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a timedelta (<em>td</em>) return an integer representing the equivalent of
Python 2.7's <code class="xref py py-meth docutils literal"><span class="pre">datetime.timdelta.total_seconds()</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.process_opt_esc_sequence">
<code class="descclassname">gateone.core.utils.</code><code class="descname">process_opt_esc_sequence</code><span class="sig-paren">(</span><em>chars</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#process_opt_esc_sequence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.process_opt_esc_sequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the <em>chars</em> passed from <code class="xref py py-class docutils literal"><span class="pre">terminal.Terminal</span></code> by way of the
special, optional escape sequence handler (e.g. '&lt;plugin&gt;|&lt;text&gt;') into a
tuple of (&lt;plugin name&gt;, &lt;text&gt;).  Here's an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">process_opt_esc_sequence</span><span class="p">(</span><span class="s1">&#39;ssh|user@host:22&#39;</span><span class="p">)</span>
<span class="go">(&#39;ssh&#39;, &#39;user@host:22&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.raw">
<code class="descclassname">gateone.core.utils.</code><code class="descname">raw</code><span class="sig-paren">(</span><em>text</em>, <em>replacement_dict=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#raw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <em>text</em> as a string with special characters replaced by visible
equivalents using <em>replacement_dict</em>.  If <em>replacement_dict</em> is None or
False the global REPLACEMENT_DICT will be used.  Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\x1b</span><span class="s1">]0;Some xterm title</span><span class="se">\x07</span><span class="s1">&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">raw</span><span class="p">(</span><span class="n">test</span><span class="p">))</span>
<span class="go">&#39;^[]0;Some title^G&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.create_data_uri">
<code class="descclassname">gateone.core.utils.</code><code class="descname">create_data_uri</code><span class="sig-paren">(</span><em>filepath</em>, <em>mimetype=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#create_data_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.create_data_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a file at <em>filepath</em>, return that file as a data URI.</p>
<p>Raises a <a class="reference internal" href="#gateone.core.utils.MimeTypeFail" title="gateone.core.utils.MimeTypeFail"><code class="xref py py-obj docutils literal"><span class="pre">MimeTypeFail</span></code></a> exception if the mimetype could not be guessed.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.human_readable_bytes">
<code class="descclassname">gateone.core.utils.</code><code class="descname">human_readable_bytes</code><span class="sig-paren">(</span><em>nbytes</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#human_readable_bytes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.human_readable_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <em>nbytes</em> as a human-readable string in a similar fashion to how it
would be displayed by <code class="xref py py-obj docutils literal"><span class="pre">ls</span> <span class="pre">-lh</span></code> or <code class="xref py py-obj docutils literal"><span class="pre">df</span> <span class="pre">-h</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.which">
<code class="descclassname">gateone.core.utils.</code><code class="descname">which</code><span class="sig-paren">(</span><em>binary</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#which"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.which" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the full path of <em>binary</em> (string) just like the 'which' command.
Optionally, a <em>path</em> (colon-delimited string) may be given to use instead of
<code class="xref py py-obj docutils literal"><span class="pre">os.environ['PATH']</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.touch">
<code class="descclassname">gateone.core.utils.</code><code class="descname">touch</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#touch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>Emulates the 'touch' command by creating the file at <em>path</em> if it does not
exist.  If the file exist its modification time will be updated.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.timeout_func">
<code class="descclassname">gateone.core.utils.</code><code class="descname">timeout_func</code><span class="sig-paren">(</span><em>func</em>, <em>args=()</em>, <em>kwargs={}</em>, <em>timeout_duration=10</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#timeout_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.timeout_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a timeout on the given function, passing it the given args, kwargs,
and a <em>default</em> value to return in the event of a timeout.  If <em>default</em> is
a function that function will be called in the event of a timeout.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.valid_hostname">
<code class="descclassname">gateone.core.utils.</code><code class="descname">valid_hostname</code><span class="sig-paren">(</span><em>hostname</em>, <em>allow_underscore=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#valid_hostname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.valid_hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the given <em>hostname</em> is valid according to RFC rules.  Works
with Internationalized Domain Names (IDN) and optionally, hostnames with an
underscore (if <em>allow_underscore</em> is True).</p>
<p>The rules for hostnames:</p>
<blockquote>
<div><ul class="simple">
<li>Must be less than 255 characters.</li>
<li>Individual labels (separated by dots) must be &lt;= 63 characters.</li>
<li>Only the ASCII alphabet (A-Z) is allowed along with dashes (-) and dots (.).</li>
<li>May not start with a dash or a dot.</li>
<li>May not end with a dash.</li>
<li>If an IDN, when converted to Punycode it must comply with the above.</li>
</ul>
</div></blockquote>
<p>IP addresses will be validated according to their well-known specifications.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">valid_hostname</span><span class="p">(</span><span class="s1">&#39;foo.bar.com.&#39;</span><span class="p">)</span> <span class="c1"># Standard FQDN</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_hostname</span><span class="p">(</span><span class="s1">&#39;2foo&#39;</span><span class="p">)</span> <span class="c1"># Short hostname</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_hostname</span><span class="p">(</span><span class="s1">&#39;-2foo&#39;</span><span class="p">)</span> <span class="c1"># No good:  Starts with a dash</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_hostname</span><span class="p">(</span><span class="s1">&#39;host_a&#39;</span><span class="p">)</span> <span class="c1"># No good: Can&#39;t have underscore</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_hostname</span><span class="p">(</span><span class="s1">&#39;host_a&#39;</span><span class="p">,</span> <span class="n">allow_underscore</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># Now it&#39;ll validate</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valid_hostname</span><span class="p">(</span><span class="s1">u&#39;ジェーピーニック.jp&#39;</span><span class="p">)</span> <span class="c1"># Example valid IDN</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.recursive_chown">
<code class="descclassname">gateone.core.utils.</code><code class="descname">recursive_chown</code><span class="sig-paren">(</span><em>path</em>, <em>uid</em>, <em>gid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#recursive_chown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.recursive_chown" title="Permalink to this definition">¶</a></dt>
<dd><p>Emulates 'chown -R <em>uid</em>:<em>gid</em> <em>path</em>' in pure Python</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.check_write_permissions">
<code class="descclassname">gateone.core.utils.</code><code class="descname">check_write_permissions</code><span class="sig-paren">(</span><em>user</em>, <em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#check_write_permissions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.check_write_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-obj docutils literal"><span class="pre">True</span></code> if the given <em>user</em> has write permissions to <em>path</em>.  <em>user</em>
can be a UID (int) or a username (string).</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.bind">
<code class="descclassname">gateone.core.utils.</code><code class="descname">bind</code><span class="sig-paren">(</span><em>function</em>, <em>self</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#bind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return <em>function</em> with <em>self</em> bound as the first argument.  Allows one
to write functions like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">whatever</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">whatever</span>
</pre></div>
</div>
<p>...outside of the construct of a class.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.minify">
<code class="descclassname">gateone.core.utils.</code><code class="descname">minify</code><span class="sig-paren">(</span><em>path_or_fileobj</em>, <em>kind</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#minify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.minify" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <em>path_or_fileobj</em> as a minified string.  <em>kind</em> should be one of
'js' or 'css'.  Works with JavaScript and CSS files using <code class="xref py py-obj docutils literal"><span class="pre">slimit</span></code> and
<code class="xref py py-obj docutils literal"><span class="pre">cssmin</span></code>, respectively.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils._minify">
<code class="descclassname">gateone.core.utils.</code><code class="descname">_minify</code><span class="sig-paren">(</span><em>path_or_fileobj</em>, <em>kind</em><span class="sig-paren">)</span><a class="headerlink" href="#gateone.core.utils._minify" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <em>path_or_fileobj</em> as a minified string.  <em>kind</em> should be one of
'js' or 'css'.  Works with JavaScript and CSS files using <code class="xref py py-obj docutils literal"><span class="pre">slimit</span></code> and
<code class="xref py py-obj docutils literal"><span class="pre">cssmin</span></code>, respectively.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.get_or_cache">
<code class="descclassname">gateone.core.utils.</code><code class="descname">get_or_cache</code><span class="sig-paren">(</span><em>cache_dir</em>, <em>path</em>, <em>minify=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#get_or_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.get_or_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <em>path</em>, returns the cached version of that file.  If the file has
yet to be cached, cache it and return the result.  If <em>minify</em> is <code class="xref py py-obj docutils literal"><span class="pre">True</span></code>
(the default), the file will be minified as part of the caching process (if
possible).</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.drop_privileges">
<code class="descclassname">gateone.core.utils.</code><code class="descname">drop_privileges</code><span class="sig-paren">(</span><em>uid='nobody'</em>, <em>gid='nogroup'</em>, <em>supl_groups=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#drop_privileges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.drop_privileges" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop privileges by changing the current process owner/group to
<em>uid</em>/<em>gid</em> (both may be an integer or a string).  If <em>supl_groups</em> (list)
is given the process will be assigned those values as its effective
supplemental groups.  If <em>supl_groups</em> is None it will default to using
'tty' as the only supplemental group.  Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">drop_privileges</span><span class="p">(</span><span class="s1">&#39;gateone&#39;</span><span class="p">,</span> <span class="s1">&#39;gateone&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;tty&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>This would change the current process owner to gateone/gateone with 'tty' as
its only supplemental group.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On most Unix systems users must belong to the 'tty' group to create new
controlling TTYs which is necessary for 'pty.fork()' to work.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you get errors like, &quot;OSError: out of pty devices&quot; it likely means
that your OS uses something other than 'tty' as the group owner of the
devpts filesystem.  'mount | grep pts' will tell you the owner (look for
gid=&lt;owner&gt;).</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.strip_xss">
<code class="descclassname">gateone.core.utils.</code><code class="descname">strip_xss</code><span class="sig-paren">(</span><em>html</em>, <em>whitelist=None</em>, <em>replacement=u'\u2421'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#strip_xss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.strip_xss" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns a tuple containing:</p>
<blockquote>
<div><ul class="simple">
<li><em>html</em> with all non-whitelisted HTML tags replaced with <em>replacement</em>.  Any tags that contain JavaScript, VBScript, or other known XSS/executable functions will also be removed.</li>
<li>A list containing the tags that were removed.</li>
</ul>
</div></blockquote>
<p>If <em>whitelist</em> is not given the following will be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">whitelist</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span>
    <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;abbr&#39;</span><span class="p">,</span> <span class="s1">&#39;aside&#39;</span><span class="p">,</span> <span class="s1">&#39;audio&#39;</span><span class="p">,</span> <span class="s1">&#39;bdi&#39;</span><span class="p">,</span> <span class="s1">&#39;bdo&#39;</span><span class="p">,</span> <span class="s1">&#39;blockquote&#39;</span><span class="p">,</span> <span class="s1">&#39;canvas&#39;</span><span class="p">,</span>
    <span class="s1">&#39;caption&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;col&#39;</span><span class="p">,</span> <span class="s1">&#39;colgroup&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;dd&#39;</span><span class="p">,</span> <span class="s1">&#39;del&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">,</span> <span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="s1">&#39;dl&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="s1">&#39;em&#39;</span><span class="p">,</span> <span class="s1">&#39;figcaption&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="s1">&#39;h1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;h2&#39;</span><span class="p">,</span> <span class="s1">&#39;h3&#39;</span><span class="p">,</span> <span class="s1">&#39;h4&#39;</span><span class="p">,</span> <span class="s1">&#39;h5&#39;</span><span class="p">,</span> <span class="s1">&#39;h6&#39;</span><span class="p">,</span> <span class="s1">&#39;hr&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;img&#39;</span><span class="p">,</span> <span class="s1">&#39;ins&#39;</span><span class="p">,</span> <span class="s1">&#39;kbd&#39;</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mark&#39;</span><span class="p">,</span> <span class="s1">&#39;ol&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;pre&#39;</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="s1">&#39;rp&#39;</span><span class="p">,</span> <span class="s1">&#39;rt&#39;</span><span class="p">,</span> <span class="s1">&#39;ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;samp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;small&#39;</span><span class="p">,</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="s1">&#39;strong&#39;</span><span class="p">,</span> <span class="s1">&#39;sub&#39;</span><span class="p">,</span> <span class="s1">&#39;summary&#39;</span><span class="p">,</span> <span class="s1">&#39;sup&#39;</span><span class="p">,</span>
    <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;track&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;ul&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="s1">&#39;video&#39;</span><span class="p">,</span> <span class="s1">&#39;wbr&#39;</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;span&gt;Hello, exploit: &lt;img src=&quot;javascript:alert(&quot;pwned!&quot;)&quot;&gt;&lt;/span&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">strip_xss</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="go">(u&#39;&lt;span&gt;Hello, exploit: \u2421&lt;/span&gt;&#39;, [&#39;&lt;img src=&quot;javascript:alert(&quot;pwned!&quot;)&quot;&gt;&#39;])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default <em>replacement</em> is the unicode ␡ character (u&quot;u2421&quot;).</p>
</div>
<p>If <em>replacement</em> is &quot;entities&quot; bad HTML tags will be encoded into HTML
entities.  This allows things like &lt;script&gt;'whatever'&lt;/script&gt; to be
displayed without execution (which would be much less annoying to users that
were merely trying to share a code example).  Here's an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;span&gt;Hello, exploit: &lt;img src=&quot;javascript:alert(&quot;pwned!&quot;)&quot;&gt;&lt;/span&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">strip_xss</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">replacement</span><span class="o">=</span><span class="s2">&quot;entities&quot;</span><span class="p">)</span>
<span class="go">(&#39;&lt;span&gt;Hello, exploit: &amp;lt;span&amp;gt;Hello, exploit: &amp;lt;img src=&quot;javascript:alert(&quot;pwned!&quot;)&quot;&amp;gt;&amp;lt;/span&amp;gt;&lt;/span&gt;&#39;,</span>
<span class="go"> [&#39;&lt;img src=&quot;javascript:alert(&quot;pwned!&quot;)&quot;&gt;&#39;])</span>
<span class="go">(u&#39;&lt;span&gt;Hello, exploit: \u2421&lt;/span&gt;&#39;, [&#39;&lt;img src=&quot;javascript:alert(&quot;pwned!&quot;)&quot;&gt;&#39;])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function should work to protect against all <a class="reference external" href="https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet">the XSS examples at
OWASP</a>.
Please <a class="reference external" href="https://github.com/liftoff/GateOne/issues">let us know</a> if
you find something we missed.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.create_signature">
<code class="descclassname">gateone.core.utils.</code><code class="descname">create_signature</code><span class="sig-paren">(</span><em>*parts</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#create_signature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.create_signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an HMAC signature using the given <em>parts</em> and <em>kwargs</em>.  The first
argument <strong>must</strong> be the 'secret' followed by any arguments that are to be
part of the hash.  The only <em>kwargs</em> that is used is 'hmac_algo'.
'hmac_algo' may be any HMAC algorithm present in the hashlib module.  If not
provided, <code class="xref py py-obj docutils literal"><span class="pre">hashlib.sha1</span></code> will be used.  Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">create_signature</span><span class="p">(</span>
    <span class="s1">&#39;secret&#39;</span><span class="p">,</span>
    <span class="s1">&#39;some-api-key&#39;</span><span class="p">,</span>
    <span class="s1">&#39;user@somehost&#39;</span><span class="p">,</span>
    <span class="s1">&#39;1234567890123&#39;</span><span class="p">,</span>
    <span class="n">hmac_algo</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The API 'secret' <strong>must</strong> be the first argument.  Also, the order
<em>does</em> matter.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.kill_dtached_proc">
<code class="descclassname">gateone.core.utils.</code><code class="descname">kill_dtached_proc</code><span class="sig-paren">(</span><em>session</em>, <em>location</em>, <em>term</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#kill_dtached_proc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.kill_dtached_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills the dtach processes associated with the given <em>session</em> that matches
the given <em>location</em> and <em>term</em>.  All the dtach'd sub-processes will be
killed as well.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.core.utils.killall">
<code class="descclassname">gateone.core.utils.</code><code class="descname">killall</code><span class="sig-paren">(</span><em>session_dir</em>, <em>pid_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gateone/core/utils.html#killall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.core.utils.killall" title="Permalink to this definition">¶</a></dt>
<dd><p>Kills all running Gate One terminal processes including any detached dtach
sessions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Session_dir:</th><td class="field-body">The path to Gate One's session directory.</td>
</tr>
<tr class="field-even field"><th class="field-name">Pid_file:</th><td class="field-body">The path to Gate One's PID file</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="js_gateone.html" class="btn btn-neutral float-right" title="gateone.js" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="termio.html" class="btn btn-neutral" title="termio.py - Terminal Input/Output Module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Liftoff Software Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
window.onload = function(e) {
    // Make our collapseindex elements actually collapsible
    $('<span class="collapsindextitle">Index</span> <a class="showhide">[show]</a>').insertBefore('.collapseindex');
    $('.showhide').each(function(index, value){
        var showHide = $(this);
        showHide.click(function() {
            if (this.innerHTML == "[hide]") {
                this.innerHTML = "[show]";
            } else {
                this.innerHTML = "[hide]";
            }
            $(this).next('.collapseindex').toggle(1); // This should always be the next .collapseindex element
        });
    });
    $('.collapseindex').each(function(index, value){
        // Start them out hidden
        $(this).hide();
    });
}
</script>


</body>
</html>